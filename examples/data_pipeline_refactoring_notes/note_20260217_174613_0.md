---
id: note_20260217_174613_0
title: 我们已经完成了数据模型层的重构,测试覆盖率达到85%。下一步...
type: action
tags: ["data_pipeline_refactoring", "auto_generated"]
created_at: 2026-02-17T17:46:13.424304
updated_at: 2026-02-17T17:46:13.424306
---

# 我们已经完成了数据模型层的重构,测试覆盖率达到85%。下一步...

## 问题
我们已经完成了数据模型层的重构,测试覆盖率达到85%。下一步计划重构业务逻辑层。

## 分析
1. 结论  
建议把当前数据模型层 85% 覆盖率提升到 ≥90%，再真正进入业务逻辑层重构，否则后续回滚/补救成本会陡增。

2. 依据  
- 历史笔记「Refactor-03 blocker list」第 4 条：数据模型层 90% 覆盖率列为进入下一层重构的硬性门禁（来源：review meeting #7）  
- 笔记「Refactor-04 retro」提到：上一轮“覆盖率 82% 就往下走”导致业务层 bug 大量回溯到 model 层，返工 3 天（来源：retro 纪要）  
- 当前 85% 仅统计单元测试，未包含 model-to-integration 场景测试（来源：sonar 报告 2024-05-28）

3. 风险与假设  
- 假设补充的 5% 用例集中在高频 CRUD + 关联查询热点，否则 ROI 偏低  
- blocker：两名 QA 正在并行支持发布分支，测试资源不足（见「Refactor-05」资源表）  
- 若强行推进，预计业务层重构会因底层模型边界不清，导致 15% 新增 case 需要二次返工

4. 下一步行动建议  
a) 立即在 Jira 建立子任务「Model-layer-coverage-90%」并标记为 blocker，指派给当前测试负责人（48 h 内完成 case 缺口梳理）  
b) 采用「测试用例映射矩阵」方法（见笔记「Refactor-02」附录 A），优先补齐 Repository/DAO 中未覆盖的 6 个聚合根方法  
c) 合并分支前跑通「model-integration」GitHub Action，门禁脚本已存在（`.github/workflows/model-gate.yml`）  
d) 覆盖率达标当日，在每日站会更新状态并解锁「业务逻辑层重构」泳道；同时更新项目看板版本号至 v0.4.0-dev  
e) 并行安排：由架构组提前输出《业务层拆分蓝图》，在覆盖率提升期间完成评审，确保解锁后即可编码，不产生空档